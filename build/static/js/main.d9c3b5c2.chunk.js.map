{"version":3,"sources":["App.tsx","Post.tsx","index.tsx"],"names":["App","useState","posts","setPosts","totalPosts","setTotalPosts","totalPages","setTotalPages","currentPage","setCurrentPage","visible","setVisible","useEffect","fetch","then","response","console","log","headers","get","parseInt","json","postsTemp","forEach","el","push","_embedded","source_url","title","rendered","slug","className","map","post","src","image","alt","to","link","onClick","evt","Post","props","post_url","match","params","setPost","content","dangerouslySetInnerHTML","__html","ReactDOM","render","path","exact","component","document","getElementById"],"mappings":"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","file":"static/js/main.d9c3b5c2.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\nimport './App.css';\nimport { Link } from \"react-router-dom\";\n\nfunction App() {\n\n  const [ posts, setPosts ] = useState([{'image': '', 'title': '', 'link': ''}]);\n  const [ totalPosts, setTotalPosts ] = useState(0);\n  const [ totalPages, setTotalPages ] = useState(0);\n  const [ currentPage, setCurrentPage ] = useState(1);\n  const [visible, setVisible] = useState('invisible');\n\n  function handleLoadMorePosts(evt: any) {\n    console.log('handleLoadMorePosts');\n    \n    if (currentPage >= totalPages) {\n      console.log('Todas as paginas carregadas.');\n      return;\n    } else\n\n    setCurrentPage(currentPage + 1);\n  }\n\n  useEffect(function() {\n    fetch(`https://blog.apiki.com/wp-json/wp/v2/posts?_embed&categories=518&page=${currentPage}`)\n      .then(response => {   \n        console.log(response.headers.get(\"X-WP-TotalPages\"));\n        if (parseInt(response.headers.get(\"X-WP-TotalPages\") || '0') > 1 \n         && parseInt(response.headers.get(\"X-WP-TotalPages\") || '0') > currentPage ) {\n          setVisible('visible');\n        } else {\n          setVisible('invisible');\n        }\n        setTotalPosts(parseInt(response.headers.get(\"X-WP-Total\") || '0'));\n        setTotalPages(parseInt(response.headers.get(\"X-WP-TotalPages\") || '0'));\n        console.log('TotalPosts: ' + totalPosts);\n        console.log('TotalPages: ' + totalPages);\n        console.log('currentPage: ' + currentPage);\n        return response.json(); \n      })\n      .then(json => {\n\n        console.log('TotalPosts: ' + totalPosts);\n        console.log('TotalPages: ' + totalPages);\n        console.log('currentPage: ' + currentPage);\n\n        console.log(json);\n\n        let postsTemp: any = [];\n        json.forEach((el: any) => {\n          postsTemp.push({\n            'image': el._embedded['wp:featuredmedia'] ? el._embedded['wp:featuredmedia'][0].source_url : '',\n            'title': el.title.rendered,\n            'link': '/post/' + el.slug\n          });\n        });\n\n        console.log('posts: ');\n        console.log(posts);\n        console.log([{...posts, ...postsTemp}]);\n        setPosts([...posts, ...postsTemp]);\n      });\n  }, [currentPage]);\n\n  return (\n    <>\n    <h1 className=\"title\">Postagens do blog com a categoria Desenvolvimento</h1>\n\n    <section className=\"posts\">\n    { posts.map((post) => {\n       \n      return post.title == '' || (\n        <div className=\"post\">\n          <img className=\"post__image\" src={post.image} alt=\"\" />\n          <p className=\"post__title\">{post.title}</p>\n          <Link className=\"post__link\" to={post.link}>Acessar post</Link>\n        </div>\n      )\n    }) }\n    </section>\n    <section className=\"load-more\">\n      <button onClick={handleLoadMorePosts} className={`load-more__button ${visible}`}>Carregar mais ...</button>\n    </section>\n    \n    </>\n  );\n}\n\nexport default App;\n","import { useEffect, useState } from 'react';\n\nimport './Post.css';\n\nfunction Post(props: any) {\n    const { post_url } = props.match.params;\n\n    const [ post, setPost ] = useState({'image': '', 'title': '', 'content': ''});\n\n    useEffect(() => {\n        fetch(`https://blog.apiki.com/wp-json/wp/v2/posts?_embed&slug=${post_url}`)\n      .then(response => response.json())\n      .then(json => {\n        setPost({\n            'image': json[0]._embedded['wp:featuredmedia'][0].source_url,\n            'title': json[0].title.rendered,\n            'content': json[0].content.rendered\n        });\n      });\n    }, []);\n\n    return (\n        <div className=\"post2\">\n            <img className=\"post__image2\" src={post.image} alt=\"\" />\n            <h1 className=\"post__title2\">{post.title}</h1>\n            <p className=\"post__content\" dangerouslySetInnerHTML={{ __html: post.content }} />\n        </div>\n    );\n}\n\nexport default Post;","import ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Post from './Post';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nReactDOM.render(\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact component={App} />      \n        <Route path=\"/post/:post_url\" component={Post} />        \n      </Switch>\n    </Router>\n  , document.getElementById('root')\n);\n"],"sourceRoot":""}